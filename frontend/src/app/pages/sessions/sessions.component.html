<!DOCTYPE html>
<html lang="en">  
    <head>  
        <meta charset="utf-8">
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
        rel="stylesheet" 
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
        crossorigin="anonymous">
        <title>Sessions</title>  
    </head>  
    <body>  
        <div class="container">  
        <br/>
            <h2 style="text-align:center">Sesssion Manager</h2><br/>

            
            <div class="table-responsive" 
            ng-app="app-sessions" 
            ng-init="getAllSessions()">
                
                <form [formGroup]="sessionForm" ng-submit="onSubmit()">
                    <table class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th>Presentation Name</th>
                                <th>Room Name</th>
                                <th>Speaker Name</th>
                                <th>Timeslot</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <input 
                                    type="text" 
                                    ng-model="Session.name" 
                                    class="form-control" 
                                    formControlName="name" 
                                    placeholder="Enter Presentation Name" 
                                    ng-required="true" />
                                </td>
                                  
                                <td>
                                    <select 
                                    ng-model="Session.room"  
                                    class="form-control" 
                                    id="Room"
                                    formControlName="room" 
                                    ng-required="true"> 
                                        <option *ngFor="let session of sessions" [value]="session">{{session.room.name}}</option> 
                                    </select>
                                
                                </td>

                                <td>
                                    <select 
                                    ng-model="Session.speaker"
                                    class="form-control" 
                                    id="Speaker"
                                    formControlName="speaker" 
                                    ng-required="true"> 
                                        <option *ngFor="let session of sessions" [value]="speaker">{{session.speaker.firstName}} {{session.speaker.lastName}}</option> 
                                    </select>
                                </td>

                                <td>
                                    <select 
                                    ng-model="Session.timeslot"
                                    class="form-control" 
                                    formControlName="timeslot" 
                                    ng-required="true"> 
                                        <option *ngFor="let session of sessions" [value]="timeslot">{{session.timeslot.startTime}} -- {{session.timeslot.endTime}}</option> 
                                    </select> 
                                </td>

                                <td>
                                    <button 
                                    type="submit" 
                                    class="btn btn-success btn-sm" 
                                    ng-disabled="sessionForm.invalid">Add
                                    </button>
                                </td>
                            </tr>

                            <tr *ngFor="let session of sessions">
                                    <td>
                                        <span>{{ session.name }}</span>
                                    </td>
                                    
                                    <td>
                                       <span>{{ session.room.name }}</span>
                                    </td>
                                    <td>                                            
                                        <span>{{ session.speaker.firstName }} {{session.speaker.lastName}}</span>
                                    </td>
                                    <td>
                                        <span>{{ session.timeslot.startTime }} -- {{session.timeslot.endTime}}</span>
                                    </td>
                                    <td>
                                        <button
                                            type="button"
                                            class="btn btn-primary btn-sm"
                                            ng-click="editSession()">Edit
                                        </button>
                                        <button
                                            type="button"
                                            class="btn btn-danger btn-sm"
                                            (click)="deleteSession(session.id)">Delete
                                        </button>
                                    </td>
                            </tr>
                            
                        </tbody>
                    </table>

                </form>

   </div>  
  </div>
    </body>  
</html> 
